{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Marble Definition Schema",
  "description": "Schema for defining custom marbles",
  "type": "object",
  "required": ["id", "name", "version", "appearance", "physics"],
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique identifier for the marble",
      "pattern": "^[a-z0-9_]+$"
    },
    "name": {
      "type": "string",
      "description": "Display name for the marble"
    },
    "description": {
      "type": "string",
      "description": "Brief description of the marble"
    },
    "version": {
      "type": "string",
      "description": "Semantic version",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },
    "author": {
      "type": "string",
      "description": "Author name or identifier"
    },
    "rarity": {
      "type": "string",
      "enum": ["common", "uncommon", "rare", "epic", "legendary"],
      "description": "Rarity classification"
    },
    "appearance": {
      "type": "object",
      "description": "Visual appearance properties",
      "required": ["color"],
      "properties": {
        "color": {
          "type": "object",
          "required": ["r", "g", "b"],
          "properties": {
            "r": { "type": "number", "minimum": 0, "maximum": 1 },
            "g": { "type": "number", "minimum": 0, "maximum": 1 },
            "b": { "type": "number", "minimum": 0, "maximum": 1 }
          }
        },
        "roughness": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "Surface roughness (0=smooth, 1=rough)"
        },
        "metallic": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "Metallic factor"
        },
        "emissive": {
          "type": "object",
          "properties": {
            "r": { "type": "number", "minimum": 0, "maximum": 1 },
            "g": { "type": "number", "minimum": 0, "maximum": 1 },
            "b": { "type": "number", "minimum": 0, "maximum": 1 },
            "intensity": { "type": "number", "minimum": 0 }
          }
        },
        "texture": {
          "type": "string",
          "description": "Path to texture image (optional)"
        },
        "particleEffect": {
          "type": "string",
          "description": "Particle effect identifier (optional)"
        }
      }
    },
    "physics": {
      "type": "object",
      "description": "Physical properties",
      "properties": {
        "radius": {
          "type": "number",
          "minimum": 0.1,
          "maximum": 2.0,
          "description": "Marble radius in meters"
        },
        "density": {
          "type": "number",
          "minimum": 0.1,
          "description": "Material density (affects mass)"
        },
        "friction": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "Surface friction"
        },
        "restitution": {
          "type": "number",
          "minimum": 0,
          "maximum": 2,
          "description": "Bounciness (0=no bounce, >1=super bouncy)"
        },
        "linearDamping": {
          "type": "number",
          "minimum": 0,
          "description": "Linear velocity damping"
        },
        "angularDamping": {
          "type": "number",
          "minimum": 0,
          "description": "Angular velocity damping"
        }
      }
    },
    "audio": {
      "type": "object",
      "description": "Custom audio properties",
      "properties": {
        "rollSound": {
          "type": "string",
          "description": "Custom rolling sound identifier"
        },
        "collisionSound": {
          "type": "string",
          "description": "Custom collision sound identifier"
        },
        "pitchVariation": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "Random pitch variation amount"
        }
      }
    },
    "abilities": {
      "type": "object",
      "description": "Special abilities (optional)",
      "properties": {
        "doubleJump": { "type": "boolean" },
        "magnetic": { "type": "boolean" },
        "ghostMode": { "type": "boolean" },
        "speedBoost": { "type": "number" }
      }
    }
  }
}
